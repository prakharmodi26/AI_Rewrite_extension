{
  "version": 3,
  "sources": ["../../extension/src/background.ts"],
  "sourcesContent": ["import { AiActionMessage, Tone } from './types.js';\n\nconst PARENT_ID = 'ai_actions_parent';\n\nconst REWRITE_ITEMS: { id: string; title: string; tone: Tone }[] = [\n  { id: 'rewrite_clear', title: 'Rewrite \u2192 Clear & Professional (default)', tone: 'clear' },\n  { id: 'rewrite_friendly', title: 'Rewrite \u2192 Friendly', tone: 'friendly' },\n  { id: 'rewrite_concise', title: 'Rewrite \u2192 Concise', tone: 'concise' },\n  { id: 'rewrite_formal', title: 'Rewrite \u2192 Formal', tone: 'formal' },\n  { id: 'rewrite_grammar', title: 'Rewrite \u2192 Grammar only', tone: 'grammar' },\n];\n\nconst SUMMARIZE_ITEM = { id: 'summarize', title: 'Summarize (3\u20135 bullets)' };\n\nchrome.runtime.onInstalled.addListener(async () => {\n  try {\n    await chrome.contextMenus.removeAll();\n  } catch {}\n\n  chrome.contextMenus.create({\n    id: PARENT_ID,\n    title: 'AI Actions',\n    contexts: ['selection'],\n  });\n\n  for (const item of REWRITE_ITEMS) {\n    chrome.contextMenus.create({\n      id: item.id,\n      parentId: PARENT_ID,\n      title: item.title,\n      contexts: ['selection'],\n    });\n  }\n\n  chrome.contextMenus.create({\n    id: SUMMARIZE_ITEM.id,\n    parentId: PARENT_ID,\n    title: SUMMARIZE_ITEM.title,\n    contexts: ['selection'],\n  });\n});\n\nchrome.contextMenus.onClicked.addListener(async (info, tab) => {\n  if (!tab?.id) return;\n  const selectionEmpty = !info.selectionText || info.selectionText.trim() === '';\n  if (selectionEmpty) {\n    await chrome.tabs.sendMessage(tab.id, { type: 'AI_TOAST', text: 'No text selected', level: 'info' });\n    return;\n  }\n\n  if (info.menuItemId === SUMMARIZE_ITEM.id) {\n    const msg: AiActionMessage = { type: 'AI_ACTION', task: 'summarize' };\n    await chrome.tabs.sendMessage(tab.id, msg);\n    return;\n  }\n\n  const rewrite = REWRITE_ITEMS.find((i) => i.id === info.menuItemId);\n  if (rewrite) {\n    const msg: AiActionMessage = { type: 'AI_ACTION', task: 'rewrite', tone: rewrite.tone };\n    await chrome.tabs.sendMessage(tab.id, msg);\n  }\n});\n\nchrome.commands.onCommand.addListener(async (command) => {\n  const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });\n  if (!tab?.id) return;\n  if (command === 'rewrite_default') {\n    const msg: AiActionMessage = { type: 'AI_ACTION', task: 'rewrite', tone: 'clear' };\n    await chrome.tabs.sendMessage(tab.id, msg);\n  } else if (command === 'summarize') {\n    const msg: AiActionMessage = { type: 'AI_ACTION', task: 'summarize' };\n    await chrome.tabs.sendMessage(tab.id, msg);\n  }\n});\n"],
  "mappings": ";AAEA,IAAM,YAAY;AAElB,IAAM,gBAA6D;AAAA,EACjE,EAAE,IAAI,iBAAiB,OAAO,iDAA4C,MAAM,QAAQ;AAAA,EACxF,EAAE,IAAI,oBAAoB,OAAO,2BAAsB,MAAM,WAAW;AAAA,EACxE,EAAE,IAAI,mBAAmB,OAAO,0BAAqB,MAAM,UAAU;AAAA,EACrE,EAAE,IAAI,kBAAkB,OAAO,yBAAoB,MAAM,SAAS;AAAA,EAClE,EAAE,IAAI,mBAAmB,OAAO,+BAA0B,MAAM,UAAU;AAC5E;AAEA,IAAM,iBAAiB,EAAE,IAAI,aAAa,OAAO,+BAA0B;AAE3E,OAAO,QAAQ,YAAY,YAAY,YAAY;AACjD,MAAI;AACF,UAAM,OAAO,aAAa,UAAU;AAAA,EACtC,QAAQ;AAAA,EAAC;AAET,SAAO,aAAa,OAAO;AAAA,IACzB,IAAI;AAAA,IACJ,OAAO;AAAA,IACP,UAAU,CAAC,WAAW;AAAA,EACxB,CAAC;AAED,aAAW,QAAQ,eAAe;AAChC,WAAO,aAAa,OAAO;AAAA,MACzB,IAAI,KAAK;AAAA,MACT,UAAU;AAAA,MACV,OAAO,KAAK;AAAA,MACZ,UAAU,CAAC,WAAW;AAAA,IACxB,CAAC;AAAA,EACH;AAEA,SAAO,aAAa,OAAO;AAAA,IACzB,IAAI,eAAe;AAAA,IACnB,UAAU;AAAA,IACV,OAAO,eAAe;AAAA,IACtB,UAAU,CAAC,WAAW;AAAA,EACxB,CAAC;AACH,CAAC;AAED,OAAO,aAAa,UAAU,YAAY,OAAO,MAAM,QAAQ;AAC7D,MAAI,CAAC,KAAK,GAAI;AACd,QAAM,iBAAiB,CAAC,KAAK,iBAAiB,KAAK,cAAc,KAAK,MAAM;AAC5E,MAAI,gBAAgB;AAClB,UAAM,OAAO,KAAK,YAAY,IAAI,IAAI,EAAE,MAAM,YAAY,MAAM,oBAAoB,OAAO,OAAO,CAAC;AACnG;AAAA,EACF;AAEA,MAAI,KAAK,eAAe,eAAe,IAAI;AACzC,UAAM,MAAuB,EAAE,MAAM,aAAa,MAAM,YAAY;AACpE,UAAM,OAAO,KAAK,YAAY,IAAI,IAAI,GAAG;AACzC;AAAA,EACF;AAEA,QAAM,UAAU,cAAc,KAAK,CAAC,MAAM,EAAE,OAAO,KAAK,UAAU;AAClE,MAAI,SAAS;AACX,UAAM,MAAuB,EAAE,MAAM,aAAa,MAAM,WAAW,MAAM,QAAQ,KAAK;AACtF,UAAM,OAAO,KAAK,YAAY,IAAI,IAAI,GAAG;AAAA,EAC3C;AACF,CAAC;AAED,OAAO,SAAS,UAAU,YAAY,OAAO,YAAY;AACvD,QAAM,CAAC,GAAG,IAAI,MAAM,OAAO,KAAK,MAAM,EAAE,QAAQ,MAAM,eAAe,KAAK,CAAC;AAC3E,MAAI,CAAC,KAAK,GAAI;AACd,MAAI,YAAY,mBAAmB;AACjC,UAAM,MAAuB,EAAE,MAAM,aAAa,MAAM,WAAW,MAAM,QAAQ;AACjF,UAAM,OAAO,KAAK,YAAY,IAAI,IAAI,GAAG;AAAA,EAC3C,WAAW,YAAY,aAAa;AAClC,UAAM,MAAuB,EAAE,MAAM,aAAa,MAAM,YAAY;AACpE,UAAM,OAAO,KAAK,YAAY,IAAI,IAAI,GAAG;AAAA,EAC3C;AACF,CAAC;",
  "names": []
}
